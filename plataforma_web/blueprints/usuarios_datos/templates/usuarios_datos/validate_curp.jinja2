{% extends 'layouts/app.jinja2' %}
{% import 'macros/detail.jinja2' as detail %}
{% import 'macros/form.jinja2' as f with context %}
{% import 'macros/topbar.jinja2' as topbar %}

{% block title %}Validar CURP{% endblock %}

{% block topbar_actions %}
    {{ topbar.page('Validar - CURP de ' + usuario_dato.usuario.nombre) }}
{% endblock %}

{% block content %}
    {# Preview #}
    {% call f.card('Datos a validar') %}
        {{ detail.label_value('CURP registrado en PW', usuario_dato.usuario.curp) }}
        {{ detail.label_value('CURP', usuario_dato.curp) }}
        {{ detail.label_value('Archivo adjunto') }}
        {% if archivo %}
            {% if tipo_archivo == "PDF" %}
            <object data="{{ archivo }}" type="application/pdf" width="100%" height="600"></object>
            {% elif tipo_archivo == "JPG" %}
                <img src="{{ archivo }}" />
            {% else %}
                <p class="lead">Tipo de Archivo no disponible para su visualizaci칩n</p>
            {% endif %}
        {% endif %}
    {% endcall %}

    {% call f.card("Respuesta") %}
        {% set form_kwargs = {'usuario_dato_id': usuario_dato.id} %}
        {% call f.form_tag('usuarios_datos.validate_curp', fid='usuario_dato_form', **form_kwargs) %}
            <label for="mensaje">Mensaje de respuesta cuando no es v치lido el contenido pedido</label>
            <textarea class="form-control mb-3 bg-outline-danger" name="mensaje" style="height: 100px">{{ usuario_dato.mensaje_curp if usuario_dato.mensaje_curp else "" }}</textarea>
            <div class="row">
                <div class="col-md-auto">
                    <input class="btn btn-primary" id="valido" name="valido" type="submit" value="V치lido">
                    <a class="btn btn-secondary ms-3" href="{{url_for('usuarios_datos.detail', usuario_dato_id=usuario_dato.id)}}">Cancelar</a>
                    <input class="btn btn-danger ms-3" id="no_valido" name="no_valido" type="submit" value="No v치lido">
                </div>
            </div>
        {% endcall %}
    {% endcall %}
{% endblock %}
