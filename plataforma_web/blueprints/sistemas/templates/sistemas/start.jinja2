{% extends 'layouts/app.jinja2' %}
{% import 'macros/start.jinja2' as start %}
{% import 'macros/topbar.jinja2' as topbar %}

{% block title %}Plataforma Web{% endblock %}

{% block custom_head %}
    <style>
        .btn-tickets { display: inline-block; margin: 2px 0; }
        .btn-directorio { display: inline-block; margin: 2px 0; }
    </style>
{% endblock %}

{% block topbar_actions %}
    {{ topbar.page('Plataforma Web') }}
{% endblock %}

{% block content %}
    {# Usuarios Solicitudes #}
    {% if mostrar_portal_solicitudes %}
        {% call start.card('Recibos de nómina') %}
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-12 mb-2">
                        <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-usuarios-nominas-3.png" class="img-fluid mb-2">
                        <h4>Recibos de Nómina</h4>
                        <p>
                            A partir de diciembre de 2023 tus recibos de nómina están disponibles para su descarga aquí en Plataforma Web.
                            En caso de que no veas tus recibos, revisa que en <a href="/perfil">tu perfil</a> tu CURP se correcta.
                            Levanta un ticket de soporte técnico si no es así.
                        </p>
                        <a href="{{ url_for('usuarios_nominas.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Recibos de Nómina</a>
                    </div>
                    <div class="col-md-6 col-sm-12 mb-2">
                        <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-soportes-tickets-2.png" class="img-fluid mb-2">
                        <h4>Actualizar mis datos personales</h4>
                        <p>
                            Necesitamos contar con tu número de celular y correo electrónico personal (no coahuila.gob.mx).
                            Esto servirá para recibir notificaciones, validar tu acceso y para recibir vales de gasolina electrónicos.
                        </p>
                        <a href="{{ url_for('usuarios_solicitudes.new') }}" class="btn btn-primary btn-tickets ml-auto">Actualizar mis datos personales</a>
                    </div>
                </div>
            </div>
        {% endcall %}
    {% endif %}
    {# Soporte Técnico #}
    {% if mostrar_portal_soporte %}
        {% call start.card('Soporte Técnico') %}
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-soportes-tickets-2.png" class="img-fluid mb-2">
                            <h4>Tickets de Soporte Técnico</h4>
                            <p>
                                <a href="{{ url_for('soportes_tickets.new') }}"class="btn btn-success btn-tickets ml-auto">Crear un nuevo ticket</a>
                                <a href="{{ url_for('soportes_tickets.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Mis tickets</a>
                            </p>
                        </div>
                    </div>
                    {# ¿Buscas un teléfono? #}
                    <div class="col-md-6 col-sm-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-directorio.png" class="img-fluid mb-2">
                            <h4>Directorio telefónico</h4>
                            <p>
                                <a href="{{ url_for('funcionarios.list_active') }}" class="btn btn-primary btn-directorio">Ver el directorio telefónico</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        {% endcall %}
    {% else %}
        {# call start.card("Soporte Técnico") #}
            {# No tiene privilegios para crear tickets #}
                <!--div class="col-md-6 col-sm-12 mb-2">
                    <div class="text-center">
                        <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-soportes-tickets-1.png" class="img-fluid mb-2">
                        <h4>Bienvenido al sistema</h4>
                        <p>Ha ingresado con una cuenta que <strong>no es personal.</strong> Para solicitar Soporte Técnico a Informática use su cuenta coahuila.gob.mx ó pjecz.gob.mx.</p>
                    </div>
                </div-->
        {# endcall #}
    {% endif %}
    {# Portal de Notarías #}
    {% if mostrar_portal_notarias %}
        {% call start.card("Portal de Notarías") %}
            <div class="container">
                <div class="row" >
                    {# ¿Necesitas publicar un edicto? #}
                    <div class="col-md-6 col-sm-12 col-xs-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-publicacion-edictos.png" class="img-fluid mb-2">
                            <h5>Publicar un edicto</h5>
                            <p>
                                <a href="{{ url_for('edictos.new') }}"class="btn btn-success btn-tickets ml-auto">Subir un nuevo edicto</a>
                                <a href="{{ url_for('edictos.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Ver mis edictos</a>
                            </p>
                        </div>
                    </div>
                    {# ¿Necesitas revisar una escritura? #}
                    <div class="col-md-6 col-sm-12 col-xs-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-revision-escrituras.png" class="img-fluid mb-2">
                            <h5>Subir una escritura para revisión</h5>
                            <div>
                                <a href="{{ url_for('not_escrituras.new') }}"class="btn btn-success btn-tickets ml-auto">Subir una nueva escritura</a>
                                <a href="{{ url_for('not_escrituras.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Ver mis escrituras</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endcall %}
    {% endif %}
    {# Tarjetas #}
    <div id="tarjetas" class="row">
        {% if current_user.autoridad.audiencia_categoria != "NO DEFINIDO" %}
        <div id="autoridades_audiencias_container" class="col-md-6 mb-2">
            <div id="autoridades_audiencias_spinner">
                <h5>Agenda de Audiencias</h5>
                <p class="card-text"><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_edictos != "" %}
        <div id="autoridades_edictos_container" class="col-md-6 mb-2">
            <div id="autoridades_edictos_spinner">
                <h5>Edictos</h5>
                <p class="card-text"><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_listas_de_acuerdos != "" %}
        <div id="autoridades_listas_de_acuerdos_container" class="col-md-6 mb-2">
            <div id="autoridades_listas_de_acuerdos_spinner">
                <h5>Listas de Acuerdos</h5>
                <p><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_sentencias != "" %}
        <div id="autoridades_sentencias_container" class="col-md-6 mb-2">
            <div id="autoridades_sentencias_spinner">
                <h5>Sentencias</h5>
                <p><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}

{% block custom_javascript %}
    <!-- Tarjetas -->
    {% if current_user.autoridad.audiencia_categoria != "NO DEFINIDO" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_audiencias.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_audiencias('/inicio/audiencias_json', '#autoridades_audiencias_container', '#autoridades_audiencias_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_edictos != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_edictos.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_edictos('/inicio/edictos_json', '#autoridades_edictos_container', '#autoridades_edictos_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_listas_de_acuerdos != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_listas_de_acuerdos.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_listas_de_acuerdos('/inicio/listas_de_acuerdos_json', '#autoridades_listas_de_acuerdos_container', '#autoridades_listas_de_acuerdos_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_sentencias != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_sentencias.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_sentencias('/inicio/sentencias_json', '#autoridades_sentencias_container', '#autoridades_sentencias_spinner');
            });
        </script>
    {% endif %}
{% endblock %}
