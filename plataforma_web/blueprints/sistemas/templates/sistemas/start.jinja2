{% extends 'layouts/app.jinja2' %}
{% import 'macros/start.jinja2' as start %}
{% import 'macros/topbar.jinja2' as topbar %}

{% block title %}Inicio{% endblock %}

{% block custom_head %}
    <style>
        .btn-tickets { display: inline-block; margin: 2px 0; }
        .btn-directorio { display: inline-block; margin: 2px 0; }
    </style>
{% endblock %}

{% block topbar_actions %}
    {{ topbar.page('Inicio') }}
{% endblock %}

{% block content %}
    {# Carrusel #}
    <div class="mb-2">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="24000">
                    <img src="https://storage.googleapis.com/pjecz-informatica/static/images/carrusel-infografia-seguridad-01.jpg" class="d-block w-100" alt="01">
                </div>
                <div class="carousel-item" data-bs-interval="24000">
                    <img src="https://storage.googleapis.com/pjecz-informatica/static/images/carrusel-infografia-seguridad-02.jpg" class="d-block w-100" alt="02">
                </div>
                <div class="carousel-item" data-bs-interval="24000">
                    <img src="https://storage.googleapis.com/pjecz-informatica/static/images/carrusel-infografia-seguridad-03.jpg" class="d-block w-100" alt="03">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    {# Plataforma Web #}
    {% call start.card('Soporte Técnico') %}
        <div class="container">
            <div class="row" >
                {% if rol  == "ADMINISTRADOR" or rol == "SOPORTE USUARIO" %}
                    {# Si tiene privilegios para crear tickets col-md-12 offset-md-3 #}
                    <div class="col-md-6 col-sm-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-soportes-tickets-2.png" class="img-fluid mb-2">
                            <h4>¿Necesitas soporte técnico?</h4>
                            <p>
                                <a href="{{ url_for('soportes_tickets.new') }}"class="btn btn-success btn-tickets ml-auto">Crear un nuevo ticket</a>
                                <a href="{{ url_for('soportes_tickets.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Mis tickets</a>
                            </p>
                        </div>
                    </div>
                {% else %}
                    {# No tiene privilegios para crear tickets #}
                    <div class="col-md-6 col-sm-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-soportes-tickets-1.png" class="img-fluid mb-2">
                            <h4>Bienvenido al sistema</h4>
                            <p>Ha ingresado con una cuenta que <strong>no es personal.</strong> Para solicitar Soporte Técnico a Informática use su cuenta coahuila.gob.mx ó pjecz.gob.mx.</p>
                        </div>
                    </div>
                {% endif %}
                {% if rol  == "ADMINISTRADOR" or rol == "SOPORTE USUARIO" %}
                    {# Directorio #}
                    <div class="col-md-6 col-sm-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/inicio-directorio.png" class="img-fluid mb-2">
                            <h4>¿Buscas un teléfono?</h4>
                            <p>
                                <a href="{{ url_for('funcionarios.list_active') }}" class="btn btn-primary btn-directorio">Directorio</a>
                            </p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    {% endcall %}
    {% call start.card("Portal de Notarías") %}
        <div class="container">
            <div class="row" >
            {% if rol  == "ADMINISTRADOR" or rol == "NOTARIA" %}
                    {# Edictos #}
                    <div class="col-md-4 col-sm-12 col-xs-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/notaria1.png" class="img-fluid mb-2" style="height: 274px; width: 300px;">
                            <h4>¿Necesitas subir un edicto?</h4>
                            <p>
                                <a href="{{ url_for('edictos.new') }}"class="btn btn-success btn-tickets ml-auto">Subir un nuevo edicto</a>
                                <a href="{{ url_for('edictos.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Mis edictos</a>
                            </p>
                        </div>
                    </div>
                    {# Escrituras #}
                    <div class="col-md-4 col-sm-12 col-xs-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/escrituras.png" class="img-fluid mb-2" style="height: 278px; width: 300px;">
                            <h4>¿Necesitas crear una escritura?</h4>
                            <div>
                                <a href="{{ url_for('escrituras.new') }}"class="btn btn-success btn-tickets ml-auto">Nueva escritura</a>
                                <a href="{{ url_for('escrituras.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Mis escrituras</a>
                            </div>
                        </div>
                    </div>
                    {# Mensajes #}
                    <div class="col-md-4 col-sm-12 col-xs-12 mb-2">
                        <div class="text-center">
                            <img src="https://storage.googleapis.com/pjecz-informatica/static/images/mensajes.png" class="img-fluid mb-2" style="height: 282px; width: 300px;">
                            <h4>¿Quieres chatear?</h4>
                            <p>
                                <a href="{{ url_for('mensajes.new') }}"class="btn btn-success btn-tickets ml-auto">Nueva conversación</a>
                                <a href="{{ url_for('mensajes.list_active') }}" class="btn btn-primary btn-tickets ml-auto">Mis conversaciones</a>
                            </p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    {% endcall %}
    {# Tarjetas #}
    <div id="tarjetas" class="row">
        {% if current_user.autoridad.audiencia_categoria != "NO DEFINIDO" %}
        <div id="autoridades_audiencias_container" class="col-md-6 mb-2">
            <div id="autoridades_audiencias_spinner">
                <h5>Agenda de Audiencias</h5>
                <p class="card-text"><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_edictos != "" %}
        <div id="autoridades_edictos_container" class="col-md-6 mb-2">
            <div id="autoridades_edictos_spinner">
                <h5>Edictos</h5>
                <p class="card-text"><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_listas_de_acuerdos != "" %}
        <div id="autoridades_listas_de_acuerdos_container" class="col-md-6 mb-2">
            <div id="autoridades_listas_de_acuerdos_spinner">
                <h5>Listas de Acuerdos</h5>
                <p><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
        {% if current_user.autoridad.directorio_sentencias != "" %}
        <div id="autoridades_sentencias_container" class="col-md-6 mb-2">
            <div id="autoridades_sentencias_spinner">
                <h5>Sentencias</h5>
                <p><span class="spinner-border" role="status"></span></p>
            </div>
        </div>
        {% endif %}
    </div>
    {# Versiones #}
    {% call start.card('Versiones') %}
        <div id="versiones_container">
            <span id="versiones_spinner" class="spinner-border" role="status"></span>
        </div>
    {% endcall %}
{% endblock %}

{% block custom_javascript %}
    <!-- Tarjetas -->
    {% if current_user.autoridad.audiencia_categoria != "NO DEFINIDO" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_audiencias.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_audiencias('/inicio/audiencias_json', '#autoridades_audiencias_container', '#autoridades_audiencias_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_edictos != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_edictos.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_edictos('/inicio/edictos_json', '#autoridades_edictos_container', '#autoridades_edictos_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_listas_de_acuerdos != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_listas_de_acuerdos.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_listas_de_acuerdos('/inicio/listas_de_acuerdos_json', '#autoridades_listas_de_acuerdos_container', '#autoridades_listas_de_acuerdos_spinner');
            });
        </script>
    {% endif %}
    {% if current_user.autoridad.directorio_sentencias != "" %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/autoridades_sentencias.js') }}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                obtener_autoridades_sentencias('/inicio/sentencias_json', '#autoridades_sentencias_container', '#autoridades_sentencias_spinner');
            });
        </script>
    {% endif %}
    <!-- Versiones -->
    <script type="text/javascript">
        const versiones_json = "{{ url_for('static', filename='json/versions.json') }}";
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/versions.js') }}"></script>
{% endblock %}
