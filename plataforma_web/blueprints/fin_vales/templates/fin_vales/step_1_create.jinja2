{% extends 'layouts/app.jinja2' %}
{% import 'macros/form.jinja2' as f with context %}
{% import 'macros/topbar.jinja2' as topbar %}
{% import 'macros/quill.jinja2' as quill %}

{% block title %}Crear Vale{% endblock %}

{% block custom_head %}
    <!-- CSS para estilo Boton ayuda -->
    {{ quill.head() }}
    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}

{% block topbar_actions %}
    {{ topbar.page('Crear Vale') }}
{% endblock %}

{% block content %}
    {% call f.card(title='Crear') %}
        {% call f.form_tag('fin_vales.step_1_create', fid='step_1_create_form') %}
            {% call f.form_group(form.usuario_nombre, readonly=true) %}{% endcall %}
            {% call f.form_group(form.usuario_puesto, readonly=true) %}{% endcall %}
            {% call f.form_group(form.usuario_email, readonly=true) %}{% endcall %}
            {% call f.form_group(form.tipo, readonly=true) %}{% endcall %}
            {% call f.form_group(form.monto) %}{% endcall %}
            {% call f.form_group(form.justificacion) %}{% endcall %}
            {% call f.form_group(form.guardar) %}{% endcall %}
        {% endcall %}
    {% endcall %}
{% endblock %}

{# se manda llamar el bot√≥n de la ayuda  #}
{% block content_help %}
    <a href="https://www.pjecz.gob.mx/pjecz-plataforma-web/fin_vales/" class="d-block mt-3 btn-flotante bg-info" role="button" target="_blank"><i class="fas fa-question"></i></a>
{% endblock %}

{% block custom_javascript %}
    <script>
        $(document).ready(function(){

            // Si cambia el monto, se actualiza la justifiacion
            $('#monto').on('change', function() {
                monto = $('#monto').val();
                montoTexto = '';
                if (monto == 100) {
                    montoTexto = '$100.00 (Cien pesos 00/100 M.N.)';
                } else if (monto == 200) {
                    montoTexto = '$200.00 (Doscientos pesos 00/100 M.N.)';
                } else if (monto == 500) {
                    montoTexto = '$500.00 (Quinientos pesos 00/100 M.N.)';
                } else {
                    montoTexto = '$0.00 (Cero pesos 00/100 M.N.)';
                }
                $('#justificacion').val('Solicito un vale de gasolina de ' + montoTexto + ' para ' + $('#usuario_nombre').val() + ' con el objetivo de ir a DESTINO U OFICINA.');
            });

        });
    </script>
{% endblock %}
